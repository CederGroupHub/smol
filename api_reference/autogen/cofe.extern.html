
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>cofe.extern package &#8212; smol 0.0.2 documentation</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/smol.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
    
    <div class="container-fluid" id="banner"></div>

    
    <nav class="navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main"><div class="container-xl">

  <div id="navbar-start">
    
    

<a class="navbar-brand" href="../../index.html">
  <img src="../../_static/logo.png" class="logo" alt="logo">
</a>


    
  </div>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-collapsible" aria-controls="navbar-collapsible" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  
  <div id="navbar-collapsible" class="col-lg-9 collapse navbar-collapse">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <ul id="navbar-main-elements" class="navbar-nav">
    <li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../getting_started.html">
  Getting Started
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../user_guide.html">
  User Guide
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../index.html">
  API Reference
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../citing.html">
  Citing
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../developer_guide/index.html">
  Developing
 </a>
</li>

    
    <li class="nav-item">
        <a class="nav-link nav-external" href="https://github.com/CederGroupHub/smol/blob/master/CHANGES.md">Changes<i class="fas fa-external-link-alt"></i></a>
    </li>
    
    <li class="nav-item">
        <a class="nav-link nav-external" href="https://github.com/CederGroupHub/smol/issues">Issues<i class="fas fa-external-link-alt"></i></a>
    </li>
    
</ul>
      </div>
      
    </div>

    <div id="navbar-end">
      
      <div class="navbar-end-item">
        <div class="dropdown" id="version_switcher">
    <button type="button" class="btn btn-primary btn-sm navbar-btn dropdown-toggle" id="version_switcher_button" data-toggle="dropdown">
        0.0.2  <!-- this text may get changed later by javascript -->
        <span class="caret"></span>
    </button>
    <div id="version_switcher_menu" class="dropdown-menu list-group-flush py-0" aria-labelledby="version_switcher_button">
    <!-- dropdown will be populated by javascript on page load -->
    </div>
</div>

<!-- NOTE: this JS must live here (not in our global JS file) because it relies
     on being processed by Jinja before it is run (specifically for replacing
     variables api_reference/autogen/cofe.extern and {'json_url': 'https://pydata-sphinx-theme.readthedocs.io/en/latest/_static/switcher.json', 'url_template': 'https://pydata-sphinx-theme.readthedocs.io/en/v{version}/', 'version_match': '0.0.2'}.
-->

<script type="text/javascript">
// Check if corresponding page path exists in other version of docs
// and, if so, go there instead of the homepage of the other docs version
function checkPageExistsAndRedirect(event) {
    const currentFilePath = "api_reference/autogen/cofe.extern.html",
          tryUrl = event.target.getAttribute("href");
    let otherDocsHomepage = tryUrl.replace(currentFilePath, "");
    $.ajax({
        type: 'HEAD',
        url: tryUrl,
        // if the page exists, go there
        success: function() {
            location.href = tryUrl;
        }
    }).fail(function() {
        location.href = otherDocsHomepage;
    });
    // this prevents the browser from following the href of the clicked node
    // (which is fine because this function takes care of redirecting)
    return false;
}

// Populate the version switcher from the JSON config file
(function () {
    $.getJSON("https://pydata-sphinx-theme.readthedocs.io/en/latest/_static/switcher.json", function(data, textStatus, jqXHR) {
        const currentFilePath = "api_reference/autogen/cofe.extern.html";
        // create links to the corresponding page in the other docs versions
        $.each(data, function(index, entry) {
            // if no custom name specified (e.g., "latest"), use version string
            if (!("name" in entry)) {
                entry.name = entry.version;
            }
            // create the node
            const node = document.createElement("a");
            node.setAttribute("class", "list-group-item list-group-item-action py-1");
            node.textContent = `${entry.name}`;
            node.setAttribute("href", `${entry.url}${currentFilePath}`);
            // on click, AJAX calls will check if the linked page exists before
            // trying to redirect, and if not, will redirect to the homepage
            // for that version of the docs.
            node.onclick = checkPageExistsAndRedirect;
            // Add dataset values for the version and name in case people want
            // to apply CSS styling based on this information.
            node.dataset["versionName"] = entry.name;
            node.dataset["version"] = entry.version;

            $("#version_switcher_menu").append(node);
            // replace dropdown button text with the preferred display name of
            // this version, rather than using sphinx's 0.0.2 variable.
            // also highlight the dropdown entry for the currently-viewed
            // version's entry
            if (entry.version == "0.0.2") {
                node.classList.add("active");
                let btn = document.getElementById("version_switcher_button");
                btn.innerText = btn.dataset["activeVersionName"] = entry.name;
                btn.dataset["activeVersion"] = entry.version;
            }
        });
    });
})();
</script>
      </div>
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
        <li class="nav-item">
          <a class="nav-link" href="https://github.com/CederGroupHub/smol" rel="noopener" target="_blank" title="GitHub"><span><i class="fab fa-github-square"></i></span>
            <label class="sr-only">GitHub</label></a>
        </li>
      </ul>
      </div>
      
    </div>
  </div>
</div>
    </nav>
    

    <div class="container-xl">
      <div class="row">
          
            
            <!-- Only show if we have sidebars configured, else just a small margin  -->
            <div class="col-12 col-md-3 bd-sidebar">
              <div class="sidebar-start-items"><form class="bd-search d-flex align-items-center" action="../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item active">
    <ul class="current nav bd-sidenav">
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   cofe.extern package
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="cofe.space.html">
   cofe.space package
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="cofe.wrangling.html">
   cofe.wrangling package
  </a>
 </li>
</ul>

  </div>
</nav>
              </div>
              <div class="sidebar-end-items">
              </div>
            </div>
            
          

          
          <div class="d-none d-xl-block col-xl-2 bd-toc">
            
              
              <div class="toc-item">
                
<div class="tocsection onthispage mt-5 pt-1 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#submodules">
   Submodules
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#module-cofe.extern.ewald">
   cofe.extern.ewald module
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#module-cofe.extern">
   Module contents
  </a>
 </li>
</ul>

</nav>
              </div>
              
              <div class="toc-item">
                

<div class="tocsection editthispage">
    <a href="https://github.com/CederGroupHub/smol/edit/main/docs/src/api_reference/autogen/cofe.extern.rst">
        <i class="fas fa-pencil-alt"></i> Edit this page
    </a>
</div>

              </div>
              
            
          </div>
          

          
          
            
          
          <main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
              
              <div>
                
  <section id="cofe-extern-package">
<h1>cofe.extern package<a class="headerlink" href="#cofe-extern-package" title="Permalink to this headline">#</a></h1>
<section id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">#</a></h2>
</section>
<section id="module-cofe.extern.ewald">
<span id="cofe-extern-ewald-module"></span><h2>cofe.extern.ewald module<a class="headerlink" href="#module-cofe.extern.ewald" title="Permalink to this headline">#</a></h2>
<p>Implementation of EwaldTerm.</p>
<p>Provides the functionality to fit an Ewald term as an additional feature in a
cluster expansion as proposed refs below to improve convergence of expansions
of ionic materials.
Chapter 4.6 of W.D. Richard’s thesis.
W. D. Richards, et al., Energy Environ. Sci., 2016, 9, 3272–3278</p>
<dl class="py class">
<dt class="sig sig-object py" id="cofe.extern.ewald.EwaldTerm">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">EwaldTerm</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">eta</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">real_space_cut</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">recip_space_cut</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_term</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'total'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#cofe.extern.ewald.EwaldTerm" title="Permalink to this definition">#</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">monty.json.MSONable</span></code></p>
<p>EwaldTerm class that can be added to a ClusterSubspace.</p>
<p>This class can be used as an external term added to a ClusterSubspace
using the add_external_term method. Doing so introduces Ewald
electrostatic interaction energies as an additional feature to include
when fitting a cluster expansion. This usually helps to increase accuracy
and reduce complexity (number of orbits) required to fit ionic materials.</p>
<p>Initialize EwaldTerm.</p>
<p>Input parameters are standard input parameters to pymatgen
EwaldSummation. See class documentation for more information.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>eta</strong> (<em>float</em>) – parameter to override the EwaldSummation default screening
parameter eta. If not given it is determined automatically.</p></li>
<li><p><strong>real_space_cut</strong> (<em>float</em>) – real space cutoff radius. Determined automatically if not
given.</p></li>
<li><p><strong>recip_space_cut</strong> (<em>float</em>) – reciprocal space cutoff radius. Determined automatically if not
given.</p></li>
<li><p><strong>use_term</strong> (<em>str</em>) – optional
the Ewald expansion term to use as an additional term in the
expansion. Options are total, real, reciprocal, point.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="cofe.extern.ewald.EwaldTerm.as_dict">
<span class="sig-name descname"><span class="pre">as_dict</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">dict</span></span></span><a class="headerlink" href="#cofe.extern.ewald.EwaldTerm.as_dict" title="Permalink to this definition">#</a></dt>
<dd><p>Get Json-serialization dict representation.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>MSONable dict</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="cofe.extern.ewald.EwaldTerm.ewald_term_options">
<span class="sig-name descname"><span class="pre">ewald_term_options</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">('total',</span> <span class="pre">'real',</span> <span class="pre">'reciprocal',</span> <span class="pre">'point')</span></em><a class="headerlink" href="#cofe.extern.ewald.EwaldTerm.ewald_term_options" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="cofe.extern.ewald.EwaldTerm.from_dict">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_dict</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">d</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#cofe.extern.ewald.EwaldTerm.from_dict" title="Permalink to this definition">#</a></dt>
<dd><p>Create EwaldTerm from MSONable dict.</p>
<p>(Over-kill here since only EwaldSummation params are saved).</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="cofe.extern.ewald.EwaldTerm.get_ewald_matrix">
<span class="sig-name descname"><span class="pre">get_ewald_matrix</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ewald_summation</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#cofe.extern.ewald.EwaldTerm.get_ewald_matrix" title="Permalink to this definition">#</a></dt>
<dd><p>Get the corresponding Ewald matrix for the given term to use.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>ewald_summation</strong> (<em>EwaldSummation</em>) – pymatgen EwaldSummation instance</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>ewald matrix for corresponding term</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="cofe.extern.ewald.EwaldTerm.get_ewald_occu">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">get_ewald_occu</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">occu</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_ewald_sites</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ewald_inds</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#cofe.extern.ewald.EwaldTerm.get_ewald_occu" title="Permalink to this definition">#</a></dt>
<dd><p>Get the Ewald indices from a given encoded occupancy string.</p>
<p>The Ewald indices indicate matrix elements (i.e. species) corresponding
to the given occupancy.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>occu</strong> (<em>ndarray</em>) – encoded occupancy string</p></li>
<li><p><strong>num_ewald_sites</strong> (<em>int</em>) – number of total Ewald sites. This is the size of the Ewald
matrix, the sum of the size of all site spaces for all sites
in the cell.</p></li>
<li><p><strong>ewald_inds</strong> (<em>ndarray</em>) – Ewald indices for the corresponding species in the occupancy
array.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>indices of species in ewald matrix</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="cofe.extern.ewald.EwaldTerm.get_ewald_structure">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">get_ewald_structure</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">structure</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#cofe.extern.ewald.EwaldTerm.get_ewald_structure" title="Permalink to this definition">#</a></dt>
<dd><p>Get the structure and site indices contributing to Ewald summation.</p>
<p>Creates a structure with overlapping sites for each species in the
corresponding site space. This is used to construct single Ewald
matrices for all possible configurations. The ewald_inds array is a
2D array where the first element is the index of the site in a
supercell and the second is the encoded species occupancy</p>
<p>Removes vacancies and the corresponding indices to those sites from the
original structure.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>structure</strong> – Structure to compute Ewald interaction energy from</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>(Structure, array) structure and indices of sites</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>tuple</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="cofe.extern.ewald.EwaldTerm.value_from_occupancy">
<span class="sig-name descname"><span class="pre">value_from_occupancy</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">occu</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">structure</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#cofe.extern.ewald.EwaldTerm.value_from_occupancy" title="Permalink to this definition">#</a></dt>
<dd><p>Obtain the Ewald interaction energy.</p>
<p>The size of the given structure is in terms of prims.
The computed electrostatic interactions do not include the charged
cell energy (which is only important for charged structures). See
the pymatgen EwaldSummation class for further details.
For more details also look at
<a class="reference external" href="https://doi.org/10.1017/CBO9780511805769.034">https://doi.org/10.1017/CBO9780511805769.034</a> (pp. 499–511).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>occu</strong> (<em>array</em>) – occupation vector for the given structure</p></li>
<li><p><strong>structure</strong> (<em>Structure</em>) – pymatgen Structure for which to compute the electrostatic
interactions</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>float</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="module-cofe.extern">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-cofe.extern" title="Permalink to this headline">#</a></h2>
<p>Classes for external terms that can be added to a cluster subspace.</p>
<p>Contains classes for external terms to be added to a cluster subspace
representing additional features to be fitted in a cluster expansion.</p>
<p>Currently only an Ewald electrostatic interaction term exists. Maybe it will
be the only term ever needed, but alas abstraction?</p>
<dl class="py class">
<dt class="sig sig-object py" id="cofe.extern.EwaldTerm">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">EwaldTerm</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">eta</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">real_space_cut</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">recip_space_cut</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_term</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'total'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#cofe.extern.EwaldTerm" title="Permalink to this definition">#</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">monty.json.MSONable</span></code></p>
<p>EwaldTerm class that can be added to a ClusterSubspace.</p>
<p>This class can be used as an external term added to a ClusterSubspace
using the add_external_term method. Doing so introduces Ewald
electrostatic interaction energies as an additional feature to include
when fitting a cluster expansion. This usually helps to increase accuracy
and reduce complexity (number of orbits) required to fit ionic materials.</p>
<p>Initialize EwaldTerm.</p>
<p>Input parameters are standard input parameters to pymatgen
EwaldSummation. See class documentation for more information.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>eta</strong> (<em>float</em>) – parameter to override the EwaldSummation default screening
parameter eta. If not given it is determined automatically.</p></li>
<li><p><strong>real_space_cut</strong> (<em>float</em>) – real space cutoff radius. Determined automatically if not
given.</p></li>
<li><p><strong>recip_space_cut</strong> (<em>float</em>) – reciprocal space cutoff radius. Determined automatically if not
given.</p></li>
<li><p><strong>use_term</strong> (<em>str</em>) – optional
the Ewald expansion term to use as an additional term in the
expansion. Options are total, real, reciprocal, point.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="cofe.extern.EwaldTerm.as_dict">
<span class="sig-name descname"><span class="pre">as_dict</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">dict</span></span></span><a class="headerlink" href="#cofe.extern.EwaldTerm.as_dict" title="Permalink to this definition">#</a></dt>
<dd><p>Get Json-serialization dict representation.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>MSONable dict</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="cofe.extern.EwaldTerm.ewald_term_options">
<span class="sig-name descname"><span class="pre">ewald_term_options</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">('total',</span> <span class="pre">'real',</span> <span class="pre">'reciprocal',</span> <span class="pre">'point')</span></em><a class="headerlink" href="#cofe.extern.EwaldTerm.ewald_term_options" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="cofe.extern.EwaldTerm.from_dict">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_dict</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">d</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#cofe.extern.EwaldTerm.from_dict" title="Permalink to this definition">#</a></dt>
<dd><p>Create EwaldTerm from MSONable dict.</p>
<p>(Over-kill here since only EwaldSummation params are saved).</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="cofe.extern.EwaldTerm.get_ewald_matrix">
<span class="sig-name descname"><span class="pre">get_ewald_matrix</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ewald_summation</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#cofe.extern.EwaldTerm.get_ewald_matrix" title="Permalink to this definition">#</a></dt>
<dd><p>Get the corresponding Ewald matrix for the given term to use.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>ewald_summation</strong> (<em>EwaldSummation</em>) – pymatgen EwaldSummation instance</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>ewald matrix for corresponding term</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="cofe.extern.EwaldTerm.get_ewald_occu">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">get_ewald_occu</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">occu</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_ewald_sites</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ewald_inds</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#cofe.extern.EwaldTerm.get_ewald_occu" title="Permalink to this definition">#</a></dt>
<dd><p>Get the Ewald indices from a given encoded occupancy string.</p>
<p>The Ewald indices indicate matrix elements (i.e. species) corresponding
to the given occupancy.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>occu</strong> (<em>ndarray</em>) – encoded occupancy string</p></li>
<li><p><strong>num_ewald_sites</strong> (<em>int</em>) – number of total Ewald sites. This is the size of the Ewald
matrix, the sum of the size of all site spaces for all sites
in the cell.</p></li>
<li><p><strong>ewald_inds</strong> (<em>ndarray</em>) – Ewald indices for the corresponding species in the occupancy
array.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>indices of species in ewald matrix</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="cofe.extern.EwaldTerm.get_ewald_structure">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">get_ewald_structure</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">structure</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#cofe.extern.EwaldTerm.get_ewald_structure" title="Permalink to this definition">#</a></dt>
<dd><p>Get the structure and site indices contributing to Ewald summation.</p>
<p>Creates a structure with overlapping sites for each species in the
corresponding site space. This is used to construct single Ewald
matrices for all possible configurations. The ewald_inds array is a
2D array where the first element is the index of the site in a
supercell and the second is the encoded species occupancy</p>
<p>Removes vacancies and the corresponding indices to those sites from the
original structure.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>structure</strong> – Structure to compute Ewald interaction energy from</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>(Structure, array) structure and indices of sites</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>tuple</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="cofe.extern.EwaldTerm.value_from_occupancy">
<span class="sig-name descname"><span class="pre">value_from_occupancy</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">occu</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">structure</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#cofe.extern.EwaldTerm.value_from_occupancy" title="Permalink to this definition">#</a></dt>
<dd><p>Obtain the Ewald interaction energy.</p>
<p>The size of the given structure is in terms of prims.
The computed electrostatic interactions do not include the charged
cell energy (which is only important for charged structures). See
the pymatgen EwaldSummation class for further details.
For more details also look at
<a class="reference external" href="https://doi.org/10.1017/CBO9780511805769.034">https://doi.org/10.1017/CBO9780511805769.034</a> (pp. 499–511).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>occu</strong> (<em>array</em>) – occupation vector for the given structure</p></li>
<li><p><strong>structure</strong> (<em>Structure</em>) – pymatgen Structure for which to compute the electrostatic
interactions</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>float</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
</section>


              </div>
              
              
              <!-- Previous / next buttons -->
<div class='prev-next-area'>
</div>
              
          </main>
          

      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>
<footer class="footer mt-5 mt-md-0">
  <div class="container">
    
    <div class="footer-item">
      <p class="copyright">
    &copy; Copyright 2022-2022, Ceder Group.<br>
</p>
    </div>
    
    <div class="footer-item">
      <p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a> 4.5.0.<br>
</p>
    </div>
    
  </div>
</footer>
  </body>
</html>