<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>smol.moca.sampler.sampler module &#8212; smol 1.0.0 documentation</title>
    <link rel="stylesheet" href="_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/_static/default.css" />
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/language_data.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">
<script type="text/javascript" src="_static/js/jquery-1.11.0.min.js "></script>
<script type="text/javascript" src="_static/js/jquery-fix.js "></script>
<script type="text/javascript" src="_static/bootstrap-3.3.7/js/bootstrap.min.js "></script>
<script type="text/javascript" src="_static/bootstrap-sphinx.js "></script>

  </head><body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="index.html">
          smol</a>
        <span class="navbar-text navbar-version pull-left"><b></b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
                <li><a href="examples.html">Examples</a></li>
                <li><a href="api.html">API</a></li>
                <li><a href="https://github.com/CederGroupHub/smol">GitHub</a></li>
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"></ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">smol.moca.sampler.sampler module</a></li>
</ul>
</ul>
</li>
              
            
            
            
            
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  <div class="section" id="module-smol.moca.sampler.sampler">
<span id="smol-moca-sampler-sampler-module"></span><h1>smol.moca.sampler.sampler module<a class="headerlink" href="#module-smol.moca.sampler.sampler" title="Permalink to this headline">¶</a></h1>
<p>Implementation of base sampler classes.</p>
<p>A sampler essentially is an implementation of the MCMC algorithm that is used
by the corresponding ensemble to generate Monte Carlo samples.</p>
<dl class="py class">
<dt id="smol.moca.sampler.sampler.Sampler">
<em class="property">class </em><code class="sig-name descname">Sampler</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">kernel</span></em>, <em class="sig-param"><span class="n">container</span></em>, <em class="sig-param"><span class="n">seed</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#smol.moca.sampler.sampler.Sampler" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>A sampler is used to run MCMC sampling simulations.</p>
<p>The specific MCMC algorithm is defined by the given MCMCKernel.
The default will use a a simple Metropolis random walk kernel.</p>
<p>Initialize BaseSampler.</p>
<p>It is recommended to initialize a sampler with the from_ensemble
method, unless you need more control.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>kernel</strong> (<a class="reference internal" href="smol.moca.sampler.kernel.html#smol.moca.sampler.kernel.MCMCKernel" title="smol.moca.sampler.kernel.MCMCKernel"><em>MCMCKernel</em></a>) – An MCMCKernel instance.</p></li>
<li><p><strong>container</strong> (<a class="reference internal" href="smol.moca.html#smol.moca.SampleContainer" title="smol.moca.SampleContainer"><em>SampleContainer</em></a>) – A sampler containter to store samples. If given num_walkers is
taken from the container.</p></li>
<li><p><strong>seed</strong> (<em>int</em>) – optional
seed for random number generator.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt id="smol.moca.sampler.sampler.Sampler.anneal">
<code class="sig-name descname">anneal</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">temperatures</span></em>, <em class="sig-param"><span class="n">mcmc_steps</span></em>, <em class="sig-param"><span class="n">initial_occupancies</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">thin_by</span><span class="o">=</span><span class="default_value">1</span></em>, <em class="sig-param"><span class="n">progress</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="headerlink" href="#smol.moca.sampler.sampler.Sampler.anneal" title="Permalink to this definition">¶</a></dt>
<dd><p>Carry out a simulated annealing procedure.</p>
<p>Uses the total number of temperatures given by “steps” interpolating
between the start and end temperature according to a cooling function.
The start temperature is the temperature set for the ensemble.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>temperatures</strong> (<em>Sequence</em>) – Sequence of temperatures to anneal, should be strictly
decreasing.</p></li>
<li><p><strong>mcmc_steps</strong> (<em>int</em>) – number of Monte Carlo steps to run at each temperature.</p></li>
<li><p><strong>initial_occupancies</strong> (<em>ndarray</em>) – array of occupancies. If None, the last sample will be taken.
You should only provide this the first time you call run.</p></li>
<li><p><strong>thin_by</strong> (<em>int</em>) – optional
the amount to thin by for saving samples.</p></li>
<li><p><strong>progress</strong> (<em>bool</em>) – If true will show a progress bar.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="smol.moca.sampler.sampler.Sampler.clear_samples">
<code class="sig-name descname">clear_samples</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#smol.moca.sampler.sampler.Sampler.clear_samples" title="Permalink to this definition">¶</a></dt>
<dd><p>Clear samples from sampler container.</p>
</dd></dl>

<dl class="py method">
<dt id="smol.moca.sampler.sampler.Sampler.efficiency">
<code class="sig-name descname">efficiency</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">discard</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">flat</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="headerlink" href="#smol.moca.sampler.sampler.Sampler.efficiency" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the sampling efficiency for each walker.</p>
</dd></dl>

<dl class="py method">
<dt id="smol.moca.sampler.sampler.Sampler.from_ensemble">
<em class="property">classmethod </em><code class="sig-name descname">from_ensemble</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">ensemble</span></em>, <em class="sig-param"><span class="n">step_type</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">kernel_type</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">seed</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">nwalkers</span><span class="o">=</span><span class="default_value">1</span></em>, <em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#smol.moca.sampler.sampler.Sampler.from_ensemble" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a sampler based on an Ensemble instances.</p>
<p>This is the easier way to spin up a Sampler. Since it will
automatically populate and create a SampleContainer.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ensemble</strong> (<em>Ensemble</em>) – An Ensemble class to obtain sample probabilities from.</p></li>
<li><p><strong>step_type</strong> (<em>str</em>) – optional
type of step to run MCMC with. If not given the default is the
first entry in the Ensemble.valid_mcmc_steps.</p></li>
<li><p><strong>kernel_type</strong> (<em>str</em>) – optional
string specifying the specific MCMC transition kernel. This
represents the underlying MC algorithm. Currently only
Metropolis is supported.</p></li>
<li><p><strong>seed</strong> (<em>int</em>) – optional
Seed for the PRNG.</p></li>
<li><p><strong>nwalkers</strong> (<em>int</em>) – optional
Number of walkers/chains to sampler. Default is 1. More than 1
is still experimental…</p></li>
<li><p><strong>*args</strong> – Positional arguments to pass to the MCMCKernel constructor</p></li>
<li><p><strong>**kwargs</strong> – Keyword arguments to pass to the MCMCKernel constructor</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Sampler</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="smol.moca.sampler.sampler.Sampler.mcmckernel">
<em class="property">property </em><code class="sig-name descname">mcmckernel</code><a class="headerlink" href="#smol.moca.sampler.sampler.Sampler.mcmckernel" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the underlying ensemble.</p>
</dd></dl>

<dl class="py method">
<dt id="smol.moca.sampler.sampler.Sampler.run">
<code class="sig-name descname">run</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">nsteps</span></em>, <em class="sig-param"><span class="n">initial_occupancies</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">thin_by</span><span class="o">=</span><span class="default_value">1</span></em>, <em class="sig-param"><span class="n">progress</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="headerlink" href="#smol.moca.sampler.sampler.Sampler.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Run an MCMC sampling simulation.</p>
<p>This will run and save the samples every thin_by into a
SampleContainer.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>nsteps</strong> (<em>int</em>) – number of total MC steps.</p></li>
<li><p><strong>initial_occupancies</strong> (<em>ndarray</em>) – array of occupancies. If None, the last sampler will be taken.
You should only provide this the first time you call run. If
you want to reset then you should call reset before to start
a fresh run.</p></li>
<li><p><strong>thin_by</strong> (<em>int</em>) – optional
the amount to thin by for saving samples.</p></li>
<li><p><strong>progress</strong> (<em>bool</em>) – If true will show a progress bar.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="smol.moca.sampler.sampler.Sampler.sample">
<code class="sig-name descname">sample</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">nsteps</span></em>, <em class="sig-param"><span class="n">initial_occupancies</span></em>, <em class="sig-param"><span class="n">thin_by</span><span class="o">=</span><span class="default_value">1</span></em>, <em class="sig-param"><span class="n">progress</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="headerlink" href="#smol.moca.sampler.sampler.Sampler.sample" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate MC samples.</p>
<p>Yield a sampler state every thin_by iterations. A state is give by
a tuple of (occupancies, features, enthalpy)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>nsteps</strong> (<em>int</em>) – Number of iterations to run.</p></li>
<li><p><strong>initial_occupancies</strong> (<em>ndarray</em>) – array of occupancies</p></li>
<li><p><strong>thin_by</strong> (<em>int</em>) – optional
Number to thin iterations by and provide samples.</p></li>
<li><p><strong>progress</strong> (<em>bool</em>) – If true will show a progress bar.</p></li>
</ul>
</dd>
<dt class="field-even">Yields</dt>
<dd class="field-even"><p><em>tuple</em> – accepted, occupancies, features change, enthalpies change</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="smol.moca.sampler.sampler.Sampler.samples">
<em class="property">property </em><code class="sig-name descname">samples</code><a class="headerlink" href="#smol.moca.sampler.sampler.Sampler.samples" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the samplecontainer.</p>
</dd></dl>

<dl class="py method">
<dt id="smol.moca.sampler.sampler.Sampler.seed">
<em class="property">property </em><code class="sig-name descname">seed</code><a class="headerlink" href="#smol.moca.sampler.sampler.Sampler.seed" title="Permalink to this definition">¶</a></dt>
<dd><p>Seed for the random number generator.</p>
</dd></dl>

</dd></dl>

</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
        <br/>
        
      
    </p>
    <p>
        &copy; Copyright 2020, Ceder Group.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 3.2.1.<br/>
    </p>
  </div>
</footer>
  </body>
</html>