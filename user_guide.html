
<!DOCTYPE html>


<html lang="en" data-content_root="./" data-theme="auto">

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>User Guide &#8212; smol 0.5.7 documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "auto";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "auto";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="_static/css/smol.css?v=153d459c" />
  
  <!-- So that users can add custom icons -->
  <script src="_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />

    <script src="_static/documentation_options.js?v=82ac5a42"></script>
    <script src="_static/doctools.js?v=9a2dae69"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="_static/copybutton.js?v=f281be69"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'user_guide';</script>
    <script src="_static/require.js?v=d4dd881e"></script>
    <script src="_static/custom.js?v=1f4f4097"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="API Reference" href="api_reference/index.html" />
    <link rel="prev" title="Example Notebooks" href="examples.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="0.5.7" />
    <meta name="docbuild:last-update" content="Feb 16, 2025"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="auto">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

  
    
  

<a class="navbar-brand logo" href="index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="_static/logo.png" class="logo__image only-light" alt="smol 0.5.7 documentation - Home"/>
    <img src="_static/logo.png" class="logo__image only-dark pst-js-only" alt="smol 0.5.7 documentation - Home"/>
  
  
</a></div>
    
      <div class="navbar-item"><ul class="navbar-nav">
  <li class="version-switcher__container dropdown">
    <button
      type="button"
      role="button"
      class="version-switcher__button btn btn-sm navbar-btn"
      data-bs-toggle="dropdown"
      id="dLabelMore"
      aria-haspopup="listbox"
    >
      v0.5.7
      <span class="caret"></span>
    </button>
  </li>
</ul></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="getting_started.html">
    Getting Started
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="examples.html">
    Example Notebooks
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="#">
    User Guide
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="api_reference/index.html">
    API Reference
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="citing.html">
    Citing
  </a>
</li>

            <li class="nav-item dropdown">
                <button class="btn dropdown-toggle nav-item" type="button"
                data-bs-toggle="dropdown" aria-expanded="false"
                aria-controls="pst-nav-more-links">
                    More
                </button>
                <ul id="pst-nav-more-links" class="dropdown-menu">
                    
<li class=" ">
  <a class="nav-link dropdown-item nav-internal" href="developer_guide/index.html">
    Developing
  </a>
</li>


<li class=" ">
  <a class="nav-link dropdown-item nav-external" href="https://github.com/CederGroupHub/smol/releases">
    Changes
  </a>
</li>


<li class=" ">
  <a class="nav-link dropdown-item nav-external" href="https://github.com/CederGroupHub/smol/issues">
    Issues
  </a>
</li>

                </ul>
            </li>
            
  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
        </div>
      
      
        <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/CederGroupHub/smol" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
    </div>
  

  
    <button class="pst-navbar-icon sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="getting_started.html">
    Getting Started
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="examples.html">
    Example Notebooks
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="#">
    User Guide
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="api_reference/index.html">
    API Reference
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="citing.html">
    Citing
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="developer_guide/index.html">
    Developing
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-external" href="https://github.com/CederGroupHub/smol/releases">
    Changes
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-external" href="https://github.com/CederGroupHub/smol/issues">
    Issues
  </a>
</li>

  </ul>
</nav></div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/CederGroupHub/smol" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
<nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"></div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item"><nav class="sidebar-indices-items" aria-labelledby="pst-indices-navigation-heading-2">
  <p id="pst-indices-navigation-heading-2" class="sidebar-indices-items__title" role="heading" aria-level="1">Indices</p>
  <ul class="indices-link">
        <li class="toctree-l1">
          <a class="reference internal"
             href="genindex.html"
             accesskey="I">General Index</a>
        </li>
        <li class="toctree-l1">
          <a class="reference internal" href="py-modindex.html">Python Module Index</a>
        </li>
  </ul>
</nav></div>
      <div class="sidebar-primary-item">
<div id="ethical-ad-placement"
      class="flat"
      data-ea-publisher="readthedocs"
      data-ea-type="readthedocs-sidebar"
      data-ea-manual="true">
</div></div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">

<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    <li class="breadcrumb-item active" aria-current="page"><span class="ellipsis">User Guide</span></li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="user-guide">
<span id="id1"></span><h1>User Guide<a class="headerlink" href="#user-guide" title="Link to this heading">#</a></h1>
<p><strong>smol</strong> implements functionality and extensions of CE-MC methodology. It includes tools
to define, generate and fit a cluster expansion (or more generally an applied lattice
model). Additionally, it includes tools to run Monte Carlo simulations to sample
thermodynamic properties based on a fitted lattice model. The package is organized in
three main subpackages:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#smol-cofe-ug"><span class="std std-ref">Cluster Orbit Function Expansions package</span></a> (<code class="xref py py-mod docutils literal notranslate"><span class="pre">smol.cofe</span></code>) includes classes and
functions to define, train, and test cluster expansions.</p></li>
<li><p><a class="reference internal" href="#smol-moca-ug"><span class="std std-ref">Monte Carlo package</span></a> (<code class="xref py py-mod docutils literal notranslate"><span class="pre">smol.moca</span></code>) includes classes and functions to run
Markov Chain Monte Carlo (MCMC) sampling based on a cluster expansion
Hamiltonian (and a few other Hamiltonian models).</p></li>
<li><p><a class="reference internal" href="#smol-capp-ug"><span class="std std-ref">Cluster Analysis and Applications package</span></a> (<code class="xref py py-mod docutils literal notranslate"><span class="pre">smol.capp</span></code>) includes classes and
functions to generate random, special-quasirandom, and ground-state structures.</p></li>
</ul>
<section id="overview-diagram">
<h2>Overview diagram<a class="headerlink" href="#overview-diagram" title="Link to this heading">#</a></h2>
<p>An overview diagram of the main classes and data inputs necessary to build and sample
a lattice model is shown below.</p>
<img alt="_images/smol_workflow.svg" class="dark-light p-2" src="_images/smol_workflow.svg" />
<p>Following the diagram above, the general workflow to construct, fit and sample a lattice
model is as follows,</p>
<ol class="arabic simple">
<li><p>Create a <code class="xref py py-class docutils literal notranslate"><span class="pre">ClusterSubspace</span></code> based on a disordered primitive <code class="xref py py-mod docutils literal notranslate"><span class="pre">pymatgen</span></code>
<a class="reference external" href="https://pymatgen.org/pymatgen.core.structure.html">Structure</a>, a given set of
diameter cutoffs for clusters, and a specified type of basis set.</p></li>
<li><p>Use the <code class="xref py py-class docutils literal notranslate"><span class="pre">ClusterSubspace</span></code> to create a <code class="xref py py-class docutils literal notranslate"><span class="pre">StructureWrangler</span></code> to generate
fitting data in the form of correlation vectors and a normalized property (usually
energy). The training data, energy and additional properties are added to the
<code class="xref py py-class docutils literal notranslate"><span class="pre">StructureWrangler</span></code> as <code class="xref py py-mod docutils literal notranslate"><span class="pre">pymatgen</span></code> entries of type
<a class="reference external" href="https://pymatgen.org/pymatgen.entries.computed_entries.html?highlight=computedstructureentry#pymatgen.entries.computed_entries.ComputedStructureEntry">ComputedStructureEntry</a>.</p></li>
<li><p>Fitting data in the form of a correlation <code class="xref py py-attr docutils literal notranslate"><span class="pre">StructureWrangler.feature_matrix</span></code>
and a normalized property <code class="xref py py-meth docutils literal notranslate"><span class="pre">StructureWrangler.get_property_vector()</span></code> can be used
as input to a linear regression estimator from any choice of third party package,
such as <code class="xref py py-mod docutils literal notranslate"><span class="pre">scikit-learn</span></code>, <code class="xref py py-mod docutils literal notranslate"><span class="pre">glmnet</span></code> or <code class="xref py py-mod docutils literal notranslate"><span class="pre">sparse-lm</span></code>.</p></li>
<li><p>Using the fitted coefficients and the <code class="xref py py-class docutils literal notranslate"><span class="pre">ClusterSubspace</span></code> instance, a
<code class="xref py py-class docutils literal notranslate"><span class="pre">ClusterExpansion</span></code> is constructed. A <code class="xref py py-class docutils literal notranslate"><span class="pre">ClusterExpansion</span></code> can be used
to predict properties of new structures, obtain the <em>effective cluster interactions</em>,
prune out unimportant terms, among other things.</p></li>
<li><p>Using a <code class="xref py py-class docutils literal notranslate"><span class="pre">ClusterExpansion</span></code> instance, an <code class="xref py py-class docutils literal notranslate"><span class="pre">Ensemble</span></code> object can be
created to sample the corresponding Hamiltonian for a given supercell size and shape
that is specified as a supercell matrix of the unit cell corresponding to the
disordered structure used in the first step.</p></li>
<li><p>Finally, an <code class="xref py py-class docutils literal notranslate"><span class="pre">Ensemble</span></code> can be sampled in a Monte Carlo simulation by using a
an <code class="xref py py-class docutils literal notranslate"><span class="pre">Sampler</span></code>.</p></li>
<li><p>Optionally or in addition, use classes in the <code class="xref py py-mod docutils literal notranslate"><span class="pre">smol.capp</span></code> modules application to
search for special-quasirandom structures or ground-state structures.</p></li>
</ol>
<p>This simple workflow shown is sufficient for the majority of applications. A summary of
the main classes is given below. For more advanced use and custom calculations a more
detailed description of the package is given in the
<a class="reference internal" href="developer_guide/design.html#design"><span class="std std-ref">Package Design</span></a> section of the Developing page.</p>
</section>
<hr class="docutils" />
<section id="main-classes">
<h2>Main classes<a class="headerlink" href="#main-classes" title="Link to this heading">#</a></h2>
<p>Below is a general description of the core classes in each submodule, to help understand
the design, usage and capabilities of <strong>smol</strong>. You can also refer to the <a class="reference internal" href="api_reference/index.html#api-ref"><span class="std std-ref">API Reference</span></a>
for full documentation of all classes and functions in the package.</p>
<section id="cluster-orbit-function-expansions-package">
<span id="smol-cofe-ug"></span><h3>Cluster Orbit Function Expansions package<a class="headerlink" href="#cluster-orbit-function-expansions-package" title="Link to this heading">#</a></h3>
<p><code class="xref py py-mod docutils literal notranslate"><span class="pre">smol.cofe</span></code> includes the necessary classes to define, train, and test cluster
expansions. A cluster expansion is essentially a way to fit a function of
configurational degrees of freedom using a specific set of basis functions that
allow a sparse representation of that function (which resides in a high
dimensional function space). For a more thorough treatment of the formalism of
cluster expansions refer to this document or any of following references
[<a class="reference external" href="https://doi.org/10.1103/PhysRevB.48.14013">Sanchez et al., 1993</a>,
<a class="reference external" href="https://doi.org/10.1103/PhysRevB.51.11257">Ceder et al., 1995</a>,
<a class="reference external" href="https://doi.org/10.1016/j.calphad.2008.12.005">van de Walle et al., 2009</a>].</p>
<p>The core classes are:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#cluster-subspace-ug"><span class="std std-ref">Cluster subspace</span></a></p></li>
<li><p><a class="reference internal" href="#structure-wrangler-ug"><span class="std std-ref">Structure wrangler</span></a></p></li>
<li><p><a class="reference internal" href="#cluster-expansion-ug"><span class="std std-ref">Cluster expansion</span></a></p></li>
</ul>
<section id="cluster-subspace">
<span id="cluster-subspace-ug"></span><h4><code class="xref py py-class docutils literal notranslate"><span class="pre">Cluster</span> <span class="pre">subspace</span></code><a class="headerlink" href="#cluster-subspace" title="Link to this heading">#</a></h4>
<p><code class="xref py py-class docutils literal notranslate"><span class="pre">ClusterSubspace</span></code> contains the finite set of orbits and orbit basis
functions to be included in the cluster expansion.
In general, a cluster expansion is created by first generating a
<code class="xref py py-class docutils literal notranslate"><span class="pre">ClusterSubspace</span></code>, which uses a provided primitive cell of the
<code class="xref py py-mod docutils literal notranslate"><span class="pre">pymatgen</span></code> <a class="reference external" href="https://pymatgen.org/pymatgen.core.structure.html">Structure</a>
class to build the orbits of the cluster expansion. Because orbits generally
decrease in importance with length, it is recommended to use the convenience
method <code class="xref py py-meth docutils literal notranslate"><span class="pre">from_cutoffs()</span></code> to specify the cutoffs of different size
orbits (pairs, triplets, quadruplets, etc.) In addition to specifying the
type of site basis functions and their orthonormality,
<code class="xref py py-class docutils literal notranslate"><span class="pre">ClusterSubspace</span></code> also has capabilities for matching fitting structures
and determining site mappings to compute correlation vectors. A variety of options
for commonly used site basis sets are readily available, including:</p>
<ul class="simple">
<li><p>Polynomial [<a class="reference external" href="https://doi.org/10.1103/PhysRevB.48.14013">Sanchez et al., 1993</a>]</p></li>
<li><p>Sinusoid [<a class="reference external" href="https://doi.org/10.1016/j.calphad.2008.12.005">van de Walle et al., 2009</a>]</p></li>
<li><p>Species indicator (aka lattice gas) [<a class="reference external" href="https://doi.org/10.1007/s11669-015-0427-x">Zhang et al. 2015</a>]</p></li>
</ul>
<p>Additionally, the subclass <code class="xref py py-class docutils literal notranslate"><span class="pre">PottsSubspace</span></code> implements the terms to build a
redundant (frame) expansion using site indicator functions
[<a class="reference external" href="https://doi.org/10.1103/PhysRevB.104.224203">Barroso-Luque et al., 2021</a>]</p>
<p>Full documentation of the class is available here, <a class="reference internal" href="api_reference/cofe/clusterspace.html#cluster-space"><span class="std std-ref">Cluster Spaces</span></a>.</p>
</section>
<section id="structure-wrangler">
<span id="structure-wrangler-ug"></span><h4><code class="xref py py-class docutils literal notranslate"><span class="pre">Structure</span> <span class="pre">wrangler</span></code><a class="headerlink" href="#structure-wrangler" title="Link to this heading">#</a></h4>
<p><code class="xref py py-class docutils literal notranslate"><span class="pre">StructureWrangler</span></code> handles input data structures and properties
to fit to the cluster expansion.
Once a set of structures and their relevant properties (for example, their
volume or energies) have been obtained (e.g., through first-principles
calculations), <code class="xref py py-class docutils literal notranslate"><span class="pre">StructureWrangler</span></code> can be used to process this data.
Specifically, based on a given <code class="xref py py-class docutils literal notranslate"><span class="pre">ClusterSubspace</span></code>,
<code class="xref py py-class docutils literal notranslate"><span class="pre">StructureWrangler</span></code> can to compute correlation vectors and convert
the input structure data into a feature matrix for fitting to the property
vector. Additional methods are available to help process the input data,
including methods for checking, preparing, and filtering the data.</p>
<p>Full documentation of the class is available here: <a class="reference internal" href="api_reference/cofe/wrangling.sw.html#structure-wrangler"><span class="std std-ref">Structure Wrangler</span></a>.</p>
</section>
<section id="cluster-expansion">
<span id="cluster-expansion-ug"></span><h4><code class="xref py py-class docutils literal notranslate"><span class="pre">Cluster</span> <span class="pre">expansion</span></code><a class="headerlink" href="#cluster-expansion" title="Link to this heading">#</a></h4>
<p><code class="xref py py-class docutils literal notranslate"><span class="pre">ClusterExpansion</span></code> contains the fitted coefficients of the cluster
expansion for predicting CE properties of new structures.
Based on the feature matrix from the <code class="xref py py-class docutils literal notranslate"><span class="pre">StructureWrangler</span></code>, one can fit
fit the data to the properties using any fitting method they like (e.g.,
linear regression, regularized regression, etc). <code class="code docutils literal notranslate"><span class="pre">smol.cofe</span></code>
contains wrapper class <code class="xref py py-class docutils literal notranslate"><span class="pre">RegressionData</span></code> to save important information from
the regression method used (optionally including the feature matrix, target vector,
regression class, and hyperparameters). Specifically a convenience constructor to
extract information from regression methods in
<a class="reference external" href="https://scikit-learn.org/stable/">sklearn</a> or those following their API is included.
The fitted coefficients and</p>
<p><code class="xref py py-class docutils literal notranslate"><span class="pre">ClusterSubspace</span></code> objects are then given to <code class="xref py py-class docutils literal notranslate"><span class="pre">ClusterExpansion</span></code>.
The <code class="xref py py-class docutils literal notranslate"><span class="pre">ClusterExpansion</span></code> object can be used to predict the properties
of new structures but more importantly can be used along with the <a class="reference internal" href="#smol-moca-ug"><span class="std std-ref">Monte Carlo package</span></a>
classes for MC sampling.</p>
<p>Full documentation of the class is available here: <a class="reference internal" href="api_reference/cofe/clusterexpansion.html#cluster-expansion"><span class="std std-ref">ClusterExpansion</span></a>.</p>
<hr class="docutils" />
</section>
</section>
<section id="monte-carlo-package">
<span id="smol-moca-ug"></span><h3>Monte Carlo package<a class="headerlink" href="#monte-carlo-package" title="Link to this heading">#</a></h3>
<p><code class="xref py py-mod docutils literal notranslate"><span class="pre">smol.moca</span></code> includes classes and functions to run Markov Chain Monte Carlo
sampling of statistical mechanical ensembles represented by a cluster expansion
Hamiltonian (there is also support to run MCMC with simple pair interaction
models, such as Ewald electrostatic interactions). MCMC sampling is done for a
specific supercell size. In theory the larger the supercell the better the
results, but in practice there are many other nuances for picking the right
supercell size that are beyond the scope of this documentation. Our general
suggestion is to use the minimum supercell size that ensures convergence of
the property of interest at equilibrium. Note that for extensive properties,
the property of interest is usually the normalized property (e.g. energy per
prim).</p>
<p>The core classes are:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#ensemble-ug"><span class="std std-ref">Ensemble</span></a></p></li>
<li><p><a class="reference internal" href="#sampler-ug"><span class="std std-ref">Sampler</span></a></p></li>
<li><p><a class="reference internal" href="#samplecontainer-ug"><span class="std std-ref">SampleContainer</span></a></p></li>
<li><p><a class="reference internal" href="#processors-ug"><span class="std std-ref">Processors</span></a></p>
<ul>
<li><p><code class="xref py py-class docutils literal notranslate"><span class="pre">ClusterExpansionProcessor</span></code></p></li>
<li><p><code class="xref py py-class docutils literal notranslate"><span class="pre">ClusterDecompositionProcessor</span></code></p></li>
<li><p><code class="xref py py-class docutils literal notranslate"><span class="pre">EwaldProcessor</span></code></p></li>
<li><p><code class="xref py py-class docutils literal notranslate"><span class="pre">CompositeProcessor</span></code></p></li>
</ul>
</li>
</ul>
<section id="ensemble">
<span id="ensemble-ug"></span><h4><code class="xref py py-class docutils literal notranslate"><span class="pre">Ensemble</span></code><a class="headerlink" href="#ensemble" title="Link to this heading">#</a></h4>
<p>The <code class="xref py py-class docutils literal notranslate"><span class="pre">Ensemble</span></code> class represents the specific statistical mechanics ensemble
by defining the relevant thermodynamic boundary conditions in order to compute
the appropriate ensemble probability ratios. For example,
canonical ensemble is used for systems at constant temperature and
constant composition, and can be created simply using an <code class="xref py py-class docutils literal notranslate"><span class="pre">Ensemble</span></code> without setting
any chemical potentials. While a semigrand ensemble is used for systems at
constant temperature and constant chemical potential, which can be created simply by setting
the <code class="xref py py-class docutils literal notranslate"><span class="pre">Ensemble</span></code> <a href="#id5"><span class="problematic" id="id6">:prop:`chemical_potentials`</span></a>. Ensembles also hold
information of the underlying set of <code class="xref py py-class docutils literal notranslate"><span class="pre">Sublattice</span></code> for the configuration
space to be sampled. Note that as implemented, an ensemble applies to any
temperature, but the specific temperature to generate samples at is set in kernel used
when sampling using a <code class="xref py py-class docutils literal notranslate"><span class="pre">Sampler</span></code>.</p>
<p>Full documentation of the class and its subclasses are available here: <a class="reference internal" href="api_reference/moca/ensemble.html#ensemble"><span class="std std-ref">Ensembles</span></a>.</p>
</section>
<section id="sampler">
<span id="sampler-ug"></span><h4><code class="xref py py-class docutils literal notranslate"><span class="pre">Sampler</span></code><a class="headerlink" href="#sampler" title="Link to this heading">#</a></h4>
<p>A <code class="xref py py-class docutils literal notranslate"><span class="pre">Sampler</span></code> takes care of running MCMC sampling for a given ensemble.
The easiest way to create a sampler (which suffices for most use cases) is to
use the <code class="xref py py-meth docutils literal notranslate"><span class="pre">from_ensemble()</span></code> class method, which is sufficient for most cases using
only a Metropolis algorithm and simple state transitions. For more advanced use cases
and elaborate MCMC sampling more knowledge of the underlying classes (especially
<code class="xref py py-class docutils literal notranslate"><span class="pre">Metropolis</span></code> which applies the <a class="reference external" href="https://doi.org/10.1093/biomet/57.1.97">Metropolis-Hastings algorithm</a> and
<code class="xref py py-class docutils literal notranslate"><span class="pre">MCUsher</span></code> which proposes relevant flips) is necessary.</p>
<p>Full documentation of the class is available here: <a class="reference internal" href="api_reference/moca/sampler.sampler.html#sampler"><span class="std std-ref">Sampler</span></a>.</p>
</section>
<section id="samplecontainer">
<span id="samplecontainer-ug"></span><h4><code class="xref py py-class docutils literal notranslate"><span class="pre">SampleContainer</span></code><a class="headerlink" href="#samplecontainer" title="Link to this heading">#</a></h4>
<p>A <code class="xref py py-class docutils literal notranslate"><span class="pre">SampleContainer</span></code> stores data from Monte Carlo sampling simulations,
especially the occupancies and feature vectors. For lengthy MC simulations a
<code class="xref py py-class docutils literal notranslate"><span class="pre">SampleContainer</span></code> allows streaming directly to an
<a class="reference external" href="https://www.hdfgroup.org/solutions/hdf5/">HDF5</a> file, and so minimize
computer memory requirements. It also includes some minimal methods and properties
useful to begin analysing the raw samples, including methods to obtain the
mean/variance/minimum of energies, enthalpies, and composition.</p>
<p>Full documentation of the class is available here: <a class="reference internal" href="api_reference/moca/sampler.container.html#sample-container"><span class="std std-ref">Sample Container</span></a>.</p>
</section>
<section id="processors">
<span id="processors-ug"></span><h4><code class="xref py py-class docutils literal notranslate"><span class="pre">Processors</span></code><a class="headerlink" href="#processors" title="Link to this heading">#</a></h4>
<p>A <code class="xref py py-class docutils literal notranslate"><span class="pre">Processor</span></code> is used to optimally compute correlation vectors, energy,
and differences in these from variations in site occupancies. Processors
compute values only for a specific supercell specified by a given supercell
matrix.</p>
<p>Users will rarely need to directly instantiate a processor, and it is recommended
to simply create an ensemble using the <code class="xref py py-meth docutils literal notranslate"><span class="pre">from_cluster_expansion()</span></code> which
will automatically instantiate the appropriate processor. Then, accessing the
processor can be done simply by the corresponding attribute (i.e.
<code class="code docutils literal notranslate"><span class="pre">ensemble.processor</span></code>). Many methods and attributes of a processor are
very useful for setting up and analysing MCMC sampling runs. For more advanced or
specific use cases, users will need to instantiate the appropriate processor directly.</p>
<p>Full documentation of the class and its subclasses available here: <a class="reference internal" href="api_reference/moca/processors.html#processors"><span class="std std-ref">Processors</span></a>.</p>
<hr class="docutils" />
</section>
</section>
<section id="cluster-analysis-and-applications-package">
<span id="smol-capp-ug"></span><h3>Cluster Analysis and Applications package<a class="headerlink" href="#cluster-analysis-and-applications-package" title="Link to this heading">#</a></h3>
<p><code class="xref py py-mod docutils literal notranslate"><span class="pre">smol.capp</span></code> includes functions and classes that enable further analysis and
applications of lattice models and cluster expansions. Notably, this includes
classes to generate special quasirandom structures (SQS) and to perform ground-state
searches.</p>
<p>The main classes are:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#sqs-ug"><span class="std std-ref">StochasticSQSGenerator</span></a></p></li>
<li><p><a class="reference internal" href="#ground-state-ug"><span class="std std-ref">PeriodicGroundStateSolver</span></a></p></li>
</ul>
<section id="stochasticsqsgenerator">
<span id="sqs-ug"></span><h4><code class="xref py py-class docutils literal notranslate"><span class="pre">StochasticSQSGenerator</span></code><a class="headerlink" href="#stochasticsqsgenerator" title="Link to this heading">#</a></h4>
<p>The <code class="xref py py-class docutils literal notranslate"><span class="pre">StochasticSQSGenerator</span></code> class implements the stochastic SQS generation
algorithm proposed by
<a class="reference external" href="https://doi.org/10.1016/j.calphad.2013.06.006">van de Walle, A. et al.</a> that allows
generating SQS with a given number of sites and composition. In addition, the algorithm
can search for SQS using the original method based on correlation functions, or a more
efficient method based on cluster interactions instead.</p>
<p>Full documentation of the class is available here: <a class="reference internal" href="api_reference/capp/generate.special.html#special"><span class="std std-ref">Special Structures</span></a>.</p>
</section>
<section id="periodicgroundstatesolver">
<span id="ground-state-ug"></span><h4><code class="xref py py-class docutils literal notranslate"><span class="pre">PeriodicGroundStateSolver</span></code><a class="headerlink" href="#periodicgroundstatesolver" title="Link to this heading">#</a></h4>
<p>Ground-state searches can be performed using the <code class="xref py py-class docutils literal notranslate"><span class="pre">PeriodicGroundStateSolver</span></code>,
which implements the ground state search procedure for a given supercell with periodic
boundary conditions proposed by
<a class="reference external" href="https://link.aps.org/doi/10.1103/PhysRevB.94.134424">Huang, W. et al.</a>. The
implementation in <strong>smol</strong> uses a different implementation based on mixed-integer
programming instead of MAXSAT, which allows searching for ground-states of cluster
expansion constructed with any arbitrary basis and complexity.</p>
<p>Full documentation of the class is available here: <a class="reference internal" href="api_reference/capp/generate.groundstate.html#ground-state"><span class="std std-ref">Ground States</span></a>.</p>
</section>
</section>
</section>
</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="examples.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Example Notebooks</p>
      </div>
    </a>
    <a class="right-next"
       href="api_reference/index.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">API Reference</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#overview-diagram">Overview diagram</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#main-classes">Main classes</a><ul class="visible nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#cluster-orbit-function-expansions-package">Cluster Orbit Function Expansions package</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#cluster-subspace"><code class="xref py py-class docutils literal notranslate"><span class="pre">Cluster</span> <span class="pre">subspace</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#structure-wrangler"><code class="xref py py-class docutils literal notranslate"><span class="pre">Structure</span> <span class="pre">wrangler</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#cluster-expansion"><code class="xref py py-class docutils literal notranslate"><span class="pre">Cluster</span> <span class="pre">expansion</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#monte-carlo-package">Monte Carlo package</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#ensemble"><code class="xref py py-class docutils literal notranslate"><span class="pre">Ensemble</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#sampler"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sampler</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#samplecontainer"><code class="xref py py-class docutils literal notranslate"><span class="pre">SampleContainer</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#processors"><code class="xref py py-class docutils literal notranslate"><span class="pre">Processors</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#cluster-analysis-and-applications-package">Cluster Analysis and Applications package</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#stochasticsqsgenerator"><code class="xref py py-class docutils literal notranslate"><span class="pre">StochasticSQSGenerator</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#periodicgroundstatesolver"><code class="xref py py-class docutils literal notranslate"><span class="pre">PeriodicGroundStateSolver</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
  </nav></div>

  <div class="sidebar-secondary-item">

  
  <div class="tocsection editthispage">
    <a href="https://github.com/CederGroupHub/smol/edit/main/docs/src/user_guide.rst">
      <i class="fa-solid fa-pencil"></i>
      
      
        
          Edit on GitHub
        
      
    </a>
  </div>
</div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="footer-content-items footer-content__inner">
  
    <div class="footer-content-item"><p class="last-updated">
  Last updated on Feb 16, 2025.
  <br/>
</p></div>
  
</div>

          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="copyright">
    
      Â© Copyright 2022-2025, Ceder Group.
      <br/>
    
  </p>
</div>
      
        <div class="footer-item">

  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.4.7.
    <br/>
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">
  <!-- # L10n: Setting the PST URL as an argument as this does not need to be localized -->
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.16.1.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>