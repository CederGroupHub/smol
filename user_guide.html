
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>User Guide &#8212; smol 0.3.1 documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "auto";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=796348d33e8b1d947c94" rel="stylesheet">
<link href="_static/styles/bootstrap.css?digest=796348d33e8b1d947c94" rel="stylesheet">
<link href="_static/styles/pydata-sphinx-theme.css?digest=796348d33e8b1d947c94" rel="stylesheet">

  
  <link href="_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=796348d33e8b1d947c94" rel="stylesheet">
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2">
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2">
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2">

    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/css/smol.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=796348d33e8b1d947c94">
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=796348d33e8b1d947c94">

    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/sphinx_highlight.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'user_guide';</script>
    <script>
        DOCUMENTATION_OPTIONS.theme_switcher_json_url = 'https://pydata-sphinx-theme.readthedocs.io/en/latest/_static/switcher.json';
        DOCUMENTATION_OPTIONS.theme_switcher_version_match = '0.3.1';
        </script>
    <script src="_static/require.js"></script>
    <script src="_static/custom.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="API Reference" href="api_reference/index.html" />
    <link rel="prev" title="Getting Started" href="getting_started.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="docsearch:language" content="en">
  </head>
  
  
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="180" data-default-mode="auto">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>

  
  <input type="checkbox" class="sidebar-toggle" name="__primary" id="__primary">
  <label class="overlay overlay-primary" for="__primary"></label>

  
  <input type="checkbox" class="sidebar-toggle" name="__secondary" id="__secondary">
  <label class="overlay overlay-secondary" for="__secondary"></label>

  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
      
<form class="bd-search d-flex align-items-center" action="search.html" method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false">
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
    </div>
  </div>

  
  <nav class="bd-header navbar navbar-expand-lg bd-navbar" id="navbar-main"><div class="bd-header__inner bd-page-width">
  <label class="sidebar-toggle primary-toggle" for="__primary">
      <span class="fa-solid fa-bars"></span>
  </label>
  <div id="navbar-start">
    
    
  


<a class="navbar-brand logo" href="index.html">

  
  
  
  
  
  
  

  
    <img src="_static/logo.png" class="logo__image only-light" alt="Logo image">
    <img src="_static/logo.png" class="logo__image only-dark" alt="Logo image">
  
  
</a>
    
  </div>

  
  <div class="col-lg-9 navbar-header-items">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <nav class="navbar-nav">
    <p class="sidebar-header-items__title" role="heading" aria-level="1" aria-label="Site Navigation">
        Site Navigation
    </p>
    <ul id="navbar-main-elements" class="navbar-nav">
        
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="getting_started.html">
                        Getting Started
                      </a>
                    </li>
                

                    <li class="nav-item current active">
                      <a class="nav-link nav-internal" href="#">
                        User Guide
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="api_reference/index.html">
                        API Reference
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="citing.html">
                        Citing
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="developer_guide/index.html">
                        Developing
                      </a>
                    </li>
                
            <div class="nav-item dropdown">
                <button class="btn dropdown-toggle nav-item" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    More
                </button>
                <div class="dropdown-menu">
                    
                <li class="nav-item">
                  <a class="nav-link nav-external" href="https://github.com/CederGroupHub/smol/blob/master/CHANGES.md">
                    Changes
                  </a>
                </li>
                

                <li class="nav-item">
                  <a class="nav-link nav-external" href="https://github.com/CederGroupHub/smol/issues">
                    Issues
                  </a>
                </li>
                
                </div>
            </div>
            
    </ul>
</nav>
      </div>
      
    </div>

    <div id="navbar-end">
      
        <div class="navbar-end-item navbar-persistent--container">
          
<button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-toggle="tooltip">
  <i class="fa-solid fa-magnifying-glass"></i>
</button>
        </div>
      
      
      <div class="navbar-end-item">
        <div class="version-switcher__container dropdown">
    <button type="button" class="version-switcher__button btn btn-sm navbar-btn dropdown-toggle" data-toggle="dropdown">
        0.3.1  <!-- this text may get changed later by javascript -->
        <span class="caret"></span>
    </button>
    <div class="version-switcher__menu dropdown-menu list-group-flush py-0">
    <!-- dropdown will be populated by javascript on page load -->
    </div>
</div>
      </div>
      
      <div class="navbar-end-item">
        <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
</button>
      </div>
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          <a href="https://github.com/CederGroupHub/smol" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-toggle="tooltip"><span><i class="fa-brands fa-square-github"></i></span>
            <label class="sr-only">GitHub</label></a>
        </li>
      </ul>
      </div>
      
    </div>
  </div>


  
  
    <div class="navbar-persistent--mobile">
<button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-toggle="tooltip">
  <i class="fa-solid fa-magnifying-glass"></i>
</button>
    </div>
  

  
  <label class="sidebar-toggle secondary-toggle" for="__secondary">
      <span class="fa-solid fa-outdent"></span>
  </label>
  

</div>
  </nav>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar hide-on-wide">
        
  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
      
      <div class="navbar-center-item">
        <nav class="navbar-nav">
    <p class="sidebar-header-items__title" role="heading" aria-level="1" aria-label="Site Navigation">
        Site Navigation
    </p>
    <ul id="navbar-main-elements" class="navbar-nav">
        
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="getting_started.html">
                        Getting Started
                      </a>
                    </li>
                

                    <li class="nav-item current active">
                      <a class="nav-link nav-internal" href="#">
                        User Guide
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="api_reference/index.html">
                        API Reference
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="citing.html">
                        Citing
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="developer_guide/index.html">
                        Developing
                      </a>
                    </li>
                
            <div class="nav-item dropdown">
                <button class="btn dropdown-toggle nav-item" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    More
                </button>
                <div class="dropdown-menu">
                    
                <li class="nav-item">
                  <a class="nav-link nav-external" href="https://github.com/CederGroupHub/smol/blob/master/CHANGES.md">
                    Changes
                  </a>
                </li>
                

                <li class="nav-item">
                  <a class="nav-link nav-external" href="https://github.com/CederGroupHub/smol/issues">
                    Issues
                  </a>
                </li>
                
                </div>
            </div>
            
    </ul>
</nav>
      </div>
      
      </div>
    

    
    
    <div class="sidebar-header-items__end">
      
      <div class="navbar-end-item">
        <div class="version-switcher__container dropdown">
    <button type="button" class="version-switcher__button btn btn-sm navbar-btn dropdown-toggle" data-toggle="dropdown">
        0.3.1  <!-- this text may get changed later by javascript -->
        <span class="caret"></span>
    </button>
    <div class="version-switcher__menu dropdown-menu list-group-flush py-0">
    <!-- dropdown will be populated by javascript on page load -->
    </div>
</div>
      </div>
      
      <div class="navbar-end-item">
        <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
</button>
      </div>
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          <a href="https://github.com/CederGroupHub/smol" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-toggle="tooltip"><span><i class="fa-brands fa-square-github"></i></span>
            <label class="sr-only">GitHub</label></a>
        </li>
      </ul>
      </div>
      
    </div>
    
  </div>

  

  
  <div class="sidebar-end-items sidebar-primary__section">
    <div class="sidebar-end-items__item">
    </div>
  </div>

  
  <div id="rtd-footer-container"></div>

      </div>
      <main id="main-content" class="bd-main">
        
        
        <div class="bd-content">
          <div class="bd-article-container">
            
            <div class="bd-header-article">
                
            </div>
            
            
            <article class="bd-article" role="main">
              
  <section id="user-guide">
<span id="id1"></span><h1>User Guide<a class="headerlink" href="#user-guide" title="Permalink to this heading">#</a></h1>
<p><strong>smol</strong> implements functionality and extensions of CE-MC methodology. It includes tools
to define, generate and fit a cluster expansion (or more generally an applied lattice
model). Additionally, it includes tools to run Monte Carlo simulations to sample
thermodynamic properties based on a fitted lattice model. The package is organized in
two main submodules:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#smol-cofe-ug"><span class="std std-ref">Cluster Orbit Function Expansions</span></a> (<code class="xref py py-mod docutils literal notranslate"><span class="pre">smol.cofe</span></code>) includes classes and
functions to define, train, and test cluster expansions.</p></li>
<li><p><a class="reference internal" href="#smol-moca-ug"><span class="std std-ref">Monte Carlo</span></a> (<code class="xref py py-mod docutils literal notranslate"><span class="pre">smol.moca</span></code>) includes classes and functions to run
Markov Chain Monte Carlo (MCMC) sampling based on a cluster expansion
Hamiltonian (and a few other Hamiltonian models).</p></li>
</ul>
<section id="overview-diagram">
<h2>Overview diagram<a class="headerlink" href="#overview-diagram" title="Permalink to this heading">#</a></h2>
<p>An overview diagram of the main classes and data inputs necessary to build and sample
a lattice model is shown below.</p>
<img alt="_images/smol_workflow.svg" class="dark-light p-2" src="_images/smol_workflow.svg" /><p>Following the diagram above, the general workflow to construct, fit and sample a lattice
model is as follows,</p>
<ol class="arabic simple">
<li><p>Create a <code class="xref py py-class docutils literal notranslate"><span class="pre">ClusterSubspace</span></code> based on a disordered primitive <code class="xref py py-mod docutils literal notranslate"><span class="pre">pymatgen</span></code>
<a class="reference external" href="https://pymatgen.org/pymatgen.core.structure.html">Structure</a>, a given set of
diameter cutoffs for clusters, and a specified type of basis set.</p></li>
<li><p>Use the <code class="xref py py-class docutils literal notranslate"><span class="pre">ClusterSubspace</span></code> to create a <code class="xref py py-class docutils literal notranslate"><span class="pre">StructureWrangler</span></code> to generate
fitting data in the form of correlation vectors and a normalized property (usually
energy). The training data, energy and additional properties are added to the
<code class="xref py py-class docutils literal notranslate"><span class="pre">StructureWrangler</span></code> as <code class="xref py py-mod docutils literal notranslate"><span class="pre">pymatgen</span></code> entries of type
<a class="reference external" href="https://pymatgen.org/pymatgen.entries.computed_entries.html?highlight=computedstructureentry#pymatgen.entries.computed_entries.ComputedStructureEntry">ComputedStructureEntry</a>.</p></li>
<li><p>Fitting data in the form of a correlation <code class="xref py py-attr docutils literal notranslate"><span class="pre">StructureWrangler.feature_matrix</span></code>
and a normalized property <code class="xref py py-meth docutils literal notranslate"><span class="pre">StructureWrangler.get_property_vector()</span></code> can be used
as input to a linear regression estimator from any choice of third party package,
such as <code class="xref py py-mod docutils literal notranslate"><span class="pre">scikit-learn</span></code>, <code class="xref py py-mod docutils literal notranslate"><span class="pre">glmnet</span></code> or <code class="xref py py-mod docutils literal notranslate"><span class="pre">sparse-lm</span></code>.</p></li>
<li><p>Using the fitted coefficients and the <code class="xref py py-class docutils literal notranslate"><span class="pre">ClusterSubspace</span></code> instance, a
<code class="xref py py-class docutils literal notranslate"><span class="pre">ClusterExpansion</span></code> is constructed. A <code class="xref py py-class docutils literal notranslate"><span class="pre">ClusterExpansion</span></code> can be used
to predict properties of new structures, obtain the <em>effective cluster interactions</em>,
prune out unimportant terms, among other things.</p></li>
<li><p>Using a <code class="xref py py-class docutils literal notranslate"><span class="pre">ClusterExpansion</span></code> instance, an <code class="xref py py-class docutils literal notranslate"><span class="pre">Ensemble</span></code> object can be
created to sample the corresponding Hamiltonian for a given supercell size and shape
that is specified as a supercell matrix of the unit cell corresponding to the
disordered structure used in the first step.</p></li>
<li><p>Finally, an <code class="xref py py-class docutils literal notranslate"><span class="pre">Ensemble</span></code> can be sampled in a Monte Carlo simulation by using a
an <code class="xref py py-class docutils literal notranslate"><span class="pre">Sampler</span></code>.</p></li>
</ol>
<p>This simple workflow shown is sufficient for the majority of applications. A summary of
the main classes is given below. For more advanced use and custom calculations a more
detailed description of the package is given in the
<a class="reference internal" href="developer_guide/design.html#design"><span class="std std-ref">Package Design</span></a> section of the Developing page.</p>
</section>
<hr class="docutils" />
<section id="main-classes">
<h2>Main classes<a class="headerlink" href="#main-classes" title="Permalink to this heading">#</a></h2>
<p>Below is a general description of the core classes in each submodule, to help understand
the design, usage and capabilities of <strong>smol</strong>. You can also refer to the <a class="reference internal" href="api_reference/index.html#api-ref"><span class="std std-ref">API Reference</span></a>
for full documentation of all classes and functions in the package.</p>
<section id="cluster-orbit-function-expansions">
<span id="smol-cofe-ug"></span><h3>Cluster Orbit Function Expansions<a class="headerlink" href="#cluster-orbit-function-expansions" title="Permalink to this heading">#</a></h3>
<p><code class="xref py py-mod docutils literal notranslate"><span class="pre">smol.cofe</span></code> includes the necessary classes to define, train, and test cluster
expansions. A cluster expansion is essentially a way to fit a function of
configurational degrees of freedom using a specific set of basis functions that
allow a sparse representation of that function (which resides in a high
dimensional function space). For a more thorough treatment of the formalism of
cluster expansions refer to this document or any of following references
[<a class="reference external" href="https://doi.org/10.1103/PhysRevB.48.14013">Sanchez et al., 1993</a>,
<a class="reference external" href="https://doi.org/10.1103/PhysRevB.51.11257">Ceder et al., 1995</a>,
<a class="reference external" href="https://doi.org/10.1016/j.calphad.2008.12.005">van de Walle et al., 2009</a>].</p>
<p>The core classes are:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#cluster-subspace-ug"><span class="std std-ref">Cluster subspace</span></a></p></li>
<li><p><a class="reference internal" href="#structure-wrangler-ug"><span class="std std-ref">Structure wrangler</span></a></p></li>
<li><p><a class="reference internal" href="#cluster-expansion-ug"><span class="std std-ref">Cluster expansion</span></a></p></li>
</ul>
<section id="cluster-subspace">
<span id="cluster-subspace-ug"></span><h4>Cluster subspace<a class="headerlink" href="#cluster-subspace" title="Permalink to this heading">#</a></h4>
<p><code class="xref py py-class docutils literal notranslate"><span class="pre">ClusterSubspace</span></code> contains the finite set of orbits and orbit basis
functions to be included in the cluster expansion.
In general, a cluster expansion is created by first generating a
<code class="xref py py-class docutils literal notranslate"><span class="pre">ClusterSubspace</span></code>, which uses a provided primitive cell of the
<code class="xref py py-mod docutils literal notranslate"><span class="pre">pymatgen</span></code> <a class="reference external" href="https://pymatgen.org/pymatgen.core.structure.html">Structure</a>
class to build the orbits of the cluster expansion. Because orbits generally
decrease in importance with length, it is recommended to use the convenience
method <code class="xref py py-meth docutils literal notranslate"><span class="pre">from_cutoffs()</span></code> to specify the cutoffs of different size
orbits (pairs, triplets, quadruplets, etc.) In addition to specifying the
type of site basis functions and their orthonormality,
<code class="xref py py-class docutils literal notranslate"><span class="pre">ClusterSubspace</span></code> also has capabilities for matching fitting structures
and determining site mappings to compute correlation vectors. A variety of options
for commonly used site basis sets are readily available, including:</p>
<ul class="simple">
<li><p>Polynomial [<a class="reference external" href="https://doi.org/10.1103/PhysRevB.48.14013">Sanchez et al., 1993</a>]</p></li>
<li><p>Sinusoid [<a class="reference external" href="https://doi.org/10.1016/j.calphad.2008.12.005">van de Walle et al., 2009</a>]</p></li>
<li><p>Species indicator (aka lattice gas) [<a class="reference external" href="https://doi.org/10.1007/s11669-015-0427-x">Zhang et al. 2015</a>]</p></li>
</ul>
<p>Additionally, the subclass <code class="xref py py-class docutils literal notranslate"><span class="pre">PottsSubspace</span></code> implements the terms to build a
redundant (frame) expansion using site indicator functions
[<a class="reference external" href="https://doi.org/10.1103/PhysRevB.104.224203">Barroso-Luque et al., 2021</a>]</p>
<p>Full documentation of the class is available here, <a class="reference internal" href="api_reference/cofe/clusterspace.html#cluster-space"><span class="std std-ref">Cluster Spaces</span></a>.</p>
</section>
<section id="structure-wrangler">
<span id="structure-wrangler-ug"></span><h4>Structure wrangler<a class="headerlink" href="#structure-wrangler" title="Permalink to this heading">#</a></h4>
<p><code class="xref py py-class docutils literal notranslate"><span class="pre">StructureWrangler</span></code> handles input data structures and properties
to fit to the cluster expansion.
Once a set of structures and their relevant properties (for example, their
volume or energies) have been obtained (e.g., through first-principles
calculations), <code class="xref py py-class docutils literal notranslate"><span class="pre">StructureWrangler</span></code> can be used to process this data.
Specifically, based on a given <code class="xref py py-class docutils literal notranslate"><span class="pre">ClusterSubspace</span></code>,
<code class="xref py py-class docutils literal notranslate"><span class="pre">StructureWrangler</span></code> can to compute correlation vectors and convert
the input structure data into a feature matrix for fitting to the property
vector. Additional methods are available to help process the input data,
including methods for checking, preparing, and filtering the data.</p>
<p>Full documentation of the class is available here: <a class="reference internal" href="api_reference/cofe/wrangling.sw.html#structure-wrangler"><span class="std std-ref">Structure Wrangler</span></a>.</p>
</section>
<section id="cluster-expansion">
<span id="cluster-expansion-ug"></span><h4>Cluster expansion<a class="headerlink" href="#cluster-expansion" title="Permalink to this heading">#</a></h4>
<p><code class="xref py py-class docutils literal notranslate"><span class="pre">ClusterExpansion</span></code> contains the fitted coefficients of the cluster
expansion for predicting CE properties of new structures.
Based on the feature matrix from the <code class="xref py py-class docutils literal notranslate"><span class="pre">StructureWrangler</span></code>, one can fit
fit the data to the properties using any fitting method they like (e.g.,
linear regression, regularized regression, etc). <code class="code docutils literal notranslate"><span class="pre">smol.cofe</span></code>
contains wrapper class <code class="xref py py-class docutils literal notranslate"><span class="pre">RegressionData</span></code> to save important information from
the regression method used (optionally including the feature matrix, target vector,
regression class, and hyperparameters). Specifically a convenience constructor to
extract information from regression methods in
<a class="reference external" href="https://scikit-learn.org/stable/">sklearn</a> or those following their API is included.
The fitted coefficients and</p>
<p><code class="xref py py-class docutils literal notranslate"><span class="pre">ClusterSubspace</span></code> objects are then given to <code class="xref py py-class docutils literal notranslate"><span class="pre">ClusterExpansion</span></code>.
The <code class="xref py py-class docutils literal notranslate"><span class="pre">ClusterExpansion</span></code> object can be used to predict the properties
of new structures but more importantly can be used along with the <a class="reference internal" href="#smol-moca-ug"><span class="std std-ref">Monte Carlo</span></a>
classes for MC sampling.</p>
<p>Full documentation of the class is available here: <a class="reference internal" href="api_reference/cofe/clusterexpansion.html#cluster-expansion"><span class="std std-ref">ClusterExpansion</span></a>.</p>
<hr class="docutils" />
</section>
</section>
<section id="monte-carlo">
<span id="smol-moca-ug"></span><h3>Monte Carlo<a class="headerlink" href="#monte-carlo" title="Permalink to this heading">#</a></h3>
<p><code class="xref py py-mod docutils literal notranslate"><span class="pre">smol.moca</span></code> includes classes and functions to run Markov Chain Monte Carlo
sampling of statistical mechanical ensembles represented by a cluster expansion
Hamiltonian (there is also support to run MCMC with simple pair interaction
models, such as Ewald electrostatic interactions). MCMC sampling is done for a
specific supercell size. In theory the larger the supercell the better the
results, but in practice there are many other nuances for picking the right
supercell size that are beyond the scope of this documentation. Our general
suggestion is to use the minimum supercell size that ensures convergence of
the property of interest at equilibrium. Note that for extensive properties,
the property of interest is usually the normalized property (e.g. energy per
prim).</p>
<p>The core classes are:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#processors-ug"><span class="std std-ref">Processors</span></a></p>
<ul>
<li><p><code class="xref py py-class docutils literal notranslate"><span class="pre">ClusterExpansionProcessor</span></code></p></li>
<li><p><code class="xref py py-class docutils literal notranslate"><span class="pre">EwaldProcessor</span></code></p></li>
<li><p><code class="xref py py-class docutils literal notranslate"><span class="pre">CompositeProcessor</span></code></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#ensemble-ug"><span class="std std-ref">Ensemble</span></a></p></li>
<li><p><a class="reference internal" href="#sampler-ug"><span class="std std-ref">Sampler</span></a></p></li>
<li><p><a class="reference internal" href="#samplecontainer-ug"><span class="std std-ref">SampleContainer</span></a></p></li>
</ul>
<section id="processors">
<span id="processors-ug"></span><h4>Processors<a class="headerlink" href="#processors" title="Permalink to this heading">#</a></h4>
<p>A <code class="xref py py-class docutils literal notranslate"><span class="pre">Processor</span></code> is used to optimally compute correlation vectors, energy,
and differences in these from variations in site occupancies. Processors
compute values only for a specific supercell specified by a given supercell
matrix.</p>
<p>Users will rarely need to directly instantiate a processor, and it is recommended
to simply create an ensemble using the <code class="xref py py-meth docutils literal notranslate"><span class="pre">from_cluster_expansion()</span></code> which
will automatically instantiate the appropriate processor. Then, accessing the
processor can be done simply by the corresponding attribute (i.e.
<code class="code docutils literal notranslate"><span class="pre">ensemble.processor</span></code>). Many methods and attributes of a processor are
very useful for setting up and analysing MCMC sampling runs. For more advanced or
specific use cases, users will need to instantiate the appropriate processor directly.</p>
<p>Full documentation of the class and its subclasses available here: <a class="reference internal" href="api_reference/moca/processors.html#processors"><span class="std std-ref">Processors</span></a>.</p>
</section>
<section id="ensemble">
<span id="ensemble-ug"></span><h4>Ensemble<a class="headerlink" href="#ensemble" title="Permalink to this heading">#</a></h4>
<p>The <code class="xref py py-class docutils literal notranslate"><span class="pre">Ensemble</span></code> class represents the specific statistical mechanics ensemble
by defining the relevant thermodynamic boundary conditions in order to compute
the appropriate ensemble probability ratios. For example,
canonical ensemble is used for systems at constant temperature and
constant composition, and can be created simply using an <code class="xref py py-class docutils literal notranslate"><span class="pre">Ensemble</span></code> without setting
any chemical potentials. While a semigrand ensemble is used for systems at
constant temperature and constant chemical potential, which can be created simply by setting
the <code class="xref py py-class docutils literal notranslate"><span class="pre">Ensemble</span></code> <a href="#id5"><span class="problematic" id="id6">:prop:`chemical_potentials`</span></a>. Ensembles also hold
information of the underlying set of <code class="xref py py-class docutils literal notranslate"><span class="pre">Sublattice</span></code> for the configuration
space to be sampled. Note that as implemented, an ensemble applies to any
temperature, but the specific temperature to generate samples at is set in kernel used
when sampling using a <code class="xref py py-class docutils literal notranslate"><span class="pre">Sampler</span></code>.</p>
<p>Full documentation of the class and its subclasses are available here: <a class="reference internal" href="api_reference/moca/ensemble.html#ensemble"><span class="std std-ref">Ensemble</span></a>.</p>
</section>
<section id="sampler">
<span id="sampler-ug"></span><h4>Sampler<a class="headerlink" href="#sampler" title="Permalink to this heading">#</a></h4>
<p>A <code class="xref py py-class docutils literal notranslate"><span class="pre">Sampler</span></code> takes care of running MCMC sampling for a given ensemble.
The easiest way to create a sampler (which suffices for most use cases) is to
use the <code class="xref py py-meth docutils literal notranslate"><span class="pre">from_ensemble()</span></code> class method, which is sufficient for most cases using
only a Metropolis algorithm and simple state transitions. For more advanced use cases
and elaborate MCMC sampling more knowledge of the underlying classes (especially
<code class="xref py py-class docutils literal notranslate"><span class="pre">Metropolis</span></code> which applies the <a class="reference external" href="https://doi.org/10.1093/biomet/57.1.97">Metropolis-Hastings algorithm</a> and
<code class="xref py py-class docutils literal notranslate"><span class="pre">MCUsher</span></code> which proposes relevant flips) is necessary.</p>
<p>Full documentation of the class is available here: <a class="reference internal" href="api_reference/moca/sampler.sampler.html#sampler"><span class="std std-ref">Sampler</span></a>.</p>
</section>
<section id="samplecontainer">
<span id="samplecontainer-ug"></span><h4>SampleContainer<a class="headerlink" href="#samplecontainer" title="Permalink to this heading">#</a></h4>
<p>A <code class="xref py py-class docutils literal notranslate"><span class="pre">SampleContainer</span></code> stores data from Monte Carlo sampling simulations,
especially the occupancies and feature vectors. For lengthy MC simulations a
<code class="xref py py-class docutils literal notranslate"><span class="pre">SampleContainer</span></code> allows streaming directly to an
<a class="reference external" href="https://www.hdfgroup.org/solutions/hdf5/">HDF5</a> file, and so minimize
computer memory requirements. It also includes some minimal methods and properties
useful to begin analysing the raw samples, including methods to obtain the
mean/variance/minimum of energies, enthalpies, and composition.</p>
<p>Full documentation of the class is available here: <a class="reference internal" href="api_reference/moca/sampler.container.html#sample-container"><span class="std std-ref">Sample Container</span></a>.</p>
</section>
</section>
</section>
</section>


            </article>
            
            
            
            <footer class="bd-footer-article">
                <!-- Previous / next buttons -->
<div class='prev-next-area'>
  <a class='left-prev' id="prev-link" href="getting_started.html" title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
          <p class="prev-next-subtitle">previous</p>
          <p class="prev-next-title">Getting Started</p>
      </div>
  </a>
  <a class='right-next' id="next-link" href="api_reference/index.html" title="next page">
  <div class="prev-next-info">
      <p class="prev-next-subtitle">next</p>
      <p class="prev-next-title">API Reference</p>
  </div>
  <i class="fa-solid fa-angle-right"></i>
  </a>
</div>
            </footer>
            
          </div>
          
          
          
            <div class="bd-sidebar-secondary bd-toc">
              
<div class="toc-item">
  
<div class="tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
</div>
<nav id="bd-toc-nav" class="page-toc">
    <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#overview-diagram">
   Overview diagram
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#main-classes">
   Main classes
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#cluster-orbit-function-expansions">
     Cluster Orbit Function Expansions
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#cluster-subspace">
       Cluster subspace
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#structure-wrangler">
       Structure wrangler
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#cluster-expansion">
       Cluster expansion
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#monte-carlo">
     Monte Carlo
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#processors">
       Processors
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#ensemble">
       Ensemble
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#sampler">
       Sampler
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#samplecontainer">
       SampleContainer
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
</ul>

</nav>
</div>

<div class="toc-item">
  
<div id="searchbox"></div>
</div>

<div class="toc-item">
  

<div class="tocsection editthispage">
    <a href="https://github.com/CederGroupHub/smol/edit/main/docs/src/user_guide.rst">
        <i class="fa-solid fa-pencil"></i> Edit this page
    </a>
</div>

</div>

<div class="toc-item">
  
</div>

            </div>
          
          
        </div>
        <footer class="bd-footer-content">
          <div class="bd-footer-content__inner">
            
          </div>
        </footer>
        
      </main>
    </div>
  </div>

  
    
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=796348d33e8b1d947c94"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=796348d33e8b1d947c94"></script>

  <footer class="bd-footer"><div class="bd-footer__inner container">
  
  <div class="footer-item">
    
<p class="copyright">

    &copy; Copyright 2022-2023, Ceder Group.<br>

</p>

  </div>
  
  <div class="footer-item">
    <p class="theme-version">
    Built with the
    <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">
        PyData Sphinx Theme
    </a>
    0.12.0.
</p>
  </div>
  
  <div class="footer-item">
    
<p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a> 6.1.3.<br>
</p>

  </div>
  
</div>
  </footer>
  </body>
</html>